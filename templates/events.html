{% extends "base.html" %}
{% block title %}Events{% endblock %}

{% block content %}
<h2 class="events-title">Created Events</h2>

{% if events %}
    <div class="event-list">
        {% for event in events %}
        <div class="event-card">
            <h3 class="event-title">{{ event.title }}</h3>
            <p class="event-meta">
                📅 {{ event.date.strftime('%d/%m/%Y') }} <br>
                📍 {{ event.location }}
            </p>
            <p class="event-description">{{ event.description }}</p>

            {% if current_user.is_authenticated %}
                {% if event.organizer_id == current_user.id %}
                    <!-- Organizer-only buttons -->
                    <a href="{{ url_for('view_attendees', event_id=event.id) }}" class="btn-attendees">
                        View Attendees
                    </a>

                    <form action="{{ url_for('delete_event', event_id=event.id) }}" method="POST">
                        <button type="submit" class="btn-delete">Delete</button>
                    </form>

                    <!-- ✅ Share Buttons -->
                    <div class="share-buttons">
                        <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.url_root }}event/{{ event.id }}" 
                           target="_blank" class="btn-share facebook">Share on Facebook</a>

                        <a href="https://twitter.com/intent/tweet?url={{ request.url_root }}event/{{ event.id }}&text=Check out this event: {{ event.title }}" 
                           target="_blank" class="btn-share twitter">Share on Twitter</a>

                        <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.url_root }}event/{{ event.id }}" 
                           target="_blank" class="btn-share linkedin">Share on LinkedIn</a>

                        <a href="https://api.whatsapp.com/send?text=Check out this event: {{ event.title }} - {{ request.url_root }}event/{{ event.id }}" 
                           target="_blank" class="btn-share whatsapp">Share on WhatsApp</a>
                    </div>
                {% endif %}
            {% else %}
                <a href="{{ url_for('login') }}" class="btn signup-btn">
                    Login to Sign Up
                </a>
            {% endif %}
        </div>
        {% endfor %}
    </div>
{% else %}
    <p class="no-events">No events available.</p>
{% endif %}
{% endblock %}
